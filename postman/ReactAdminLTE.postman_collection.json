{
  "info": {
    "name": "React AdminLTE API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Local API for Users, Roles and Auth (JWT)."
  },
  "item": [
    {
      "name": "Health",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/health",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "health"
          ]
        }
      }
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"leanne@example.com\",\n  \"password\": \"secret\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.token) {",
                  "  pm.environment.set('token', json.token);",
                  "}",
                  "if (json && json.user && json.user.id) {",
                  "  pm.environment.set('userId', json.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"New User\",\n  \"email\": \"new.user@example.com\",\n  \"password\": \"secret\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.token) { pm.environment.set('token', json.token); }",
                  "if (json && json.user && json.user.id) { pm.environment.set('userId', json.user.id); }"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Me",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "me"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            }
          }
        },
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test User\",\n  \"email\": \"test.user@example.com\",\n  \"roles\": [2]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.id) { pm.environment.set('lastUserId', json.id); }"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get User By Id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{lastUserId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{lastUserId}}"
              ]
            }
          }
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated User\",\n  \"roles\": [1, 2]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/{{lastUserId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{lastUserId}}"
              ]
            }
          }
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{lastUserId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{lastUserId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Roles",
      "item": [
        {
          "name": "List Roles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "roles"
              ]
            }
          }
        },
        {
          "name": "Create Role",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Manager\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "roles"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.id) { pm.environment.set('lastRoleId', json.id); }"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Role",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Supervisor\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/roles/{{lastRoleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "roles",
                "{{lastRoleId}}"
              ]
            }
          }
        },
        {
          "name": "Delete Role",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/roles/{{lastRoleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "roles",
                "{{lastRoleId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Storage",
      "item": [
        {
          "name": "List Root Directory",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/storage",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage"
              ]
            }
          }
        },
        {
          "name": "Create Directory",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Project Assets\",\n  \"parentId\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/storage/directories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage",
                "directories"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.id) { pm.environment.set('lastDirectoryId', json.id); }"
                ]
              }
            }
          ]
        },
        {
          "name": "List Directory Contents",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/storage?directoryId={{lastDirectoryId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage"
              ],
              "query": [
                {
                  "key": "directoryId",
                  "value": "{{lastDirectoryId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Update Directory",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Project Assets (Renamed)\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/storage/directories/{{lastDirectoryId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage",
                "directories",
                "{{lastDirectoryId}}"
              ]
            }
          }
        },
        {
          "name": "Set Directory Grants",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"grants\": [\n    { \"roleId\": 2, \"access\": \"read\" }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/storage/directories/{{lastDirectoryId}}/grants",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage",
                "directories",
                "{{lastDirectoryId}}",
                "grants"
              ]
            }
          }
        },
        {
          "name": "Upload File",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "directoryId",
                  "value": "{{lastDirectoryId}}",
                  "type": "text"
                },
                {
                  "key": "displayName",
                  "value": "design-spec.pdf",
                  "type": "text"
                },
                {
                  "key": "visibility",
                  "value": "private",
                  "type": "text"
                },
                {
                  "key": "file",
                  "type": "file",
                  "src": "path/to/local/file.pdf"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/storage/files",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage",
                "files"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.id) { pm.environment.set('lastFileId', json.id); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Update File",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"displayName\": \"design-spec-v2.pdf\",\n  \"visibility\": \"public\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/storage/files/{{lastFileId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage",
                "files",
                "{{lastFileId}}"
              ]
            }
          }
        },
        {
          "name": "Set File Grants",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"grants\": [\n    { \"roleId\": 2, \"access\": \"read\" },\n    { \"roleId\": 3, \"access\": \"write\" }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/storage/files/{{lastFileId}}/grants",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage",
                "files",
                "{{lastFileId}}",
                "grants"
              ]
            }
          }
        },
        {
          "name": "Delete File",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/storage/files/{{lastFileId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage",
                "files",
                "{{lastFileId}}"
              ]
            }
          }
        },
        {
          "name": "Delete Directory",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/storage/directories/{{lastDirectoryId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "storage",
                "directories",
                "{{lastDirectoryId}}"
              ]
            }
          }
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001"
    },
    {
      "key": "token",
      "value": ""
    }
  ]
}